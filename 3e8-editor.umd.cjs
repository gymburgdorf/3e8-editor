(function(i,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(i=typeof globalThis<"u"?globalThis:i||self,t(i["3e8-editor"]={}))})(this,function(i){"use strict";var y=Object.defineProperty;var b=(i,t,r)=>t in i?y(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r;var a=(i,t,r)=>(b(i,typeof t!="symbol"?t+"":t,r),r);function t(s){return new Promise((e,o)=>{const n=document.createElement("script");n.src=s,n.onload=e,n.onerror=o,document.head.appendChild(n)})}const r="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs";document.head.insertAdjacentHTML("beforeend",`
    <link rel="stylesheet"
    data-name="vs/editor/editor.main"
    href="${r}/editor/editor.main.min.css">
`);async function c(){await t(`${r}/loader.min.js`);const s=window.require;return s.config({paths:{vs:r}}),new Promise(e=>{s(["vs/editor/editor.main"],()=>{e(monaco.editor)})})}let h=c();class d{constructor(e,o){a(this,"editorState");a(this,"monacoEditor");a(this,"decorations");var l;this.editorState=Object.assign({element:null,mode:"javascript",theme:"dark",fontSize:24,code:((l=e.element)==null?void 0:l.textContent)||"",readOnly:!1,disableSelect:!1,showLineNumbers:!["css","svg"].includes(e.mode||""),minLines:4,showInvisibles:e.mode==="python",maxLines:20,showGutter:!0},e);const{element:n=document.documentElement.appendChild(document.createElement("div")),code:m,minLines:v,maxLines:z,theme:E,mode:u,showGutter:g,showLineNumbers:p,readOnly:S,fontSize:f,showInvisibles:w}=this.editorState;this.editorState.element.innerHTML="",this.monacoEditor=o.create(n,{value:m||"//missing code :-)",language:u,theme:"vs-dark",readOnly:S,fontSize:f,tabSize:2,insertSpaces:!1,renderWhitespace:w?"boundary":"none",...(!g||!p)&&{lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0},scrollbar:{useShadows:!0,verticalHasArrows:!0,horizontalHasArrows:!0,verticalScrollbarSize:8,horizontalScrollbarSize:8,arrowSize:12},renderLineHighlight:"none",scrollBeyondLastLine:!1,wrappingStrategy:"advanced",minimap:{enabled:!1},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,lineNumbersMinChars:3}),this.decorations=[],this.monacoEditor.onDidContentSizeChange(()=>this.updateHeight()),this.updateHeight()}static async create(e){let o=await h;return new d(e,o)}updateHeight(){const e=Math.min(500,this.monacoEditor.getContentHeight());this.editorState.element.style.height=`${e}px`,this.monacoEditor.layout({width:this.editorState.element.getBoundingClientRect().width,height:e})}resize(){return this.updateHeight()}setValue(e){var o;return(o=this.monacoEditor.getModel())==null?void 0:o.setValue(e)}getValue(){var e;return(e=this.monacoEditor.getModel())==null?void 0:e.getValue()}undo(){return this.monacoEditor.trigger("myedits","redo","myedits")}redo(){return this.monacoEditor.trigger("myedits","undo","myedits")}sizeup(){this.setFontSize(this.editorState.fontSize+1)}sizedown(){this.setFontSize(this.editorState.fontSize-1)}setFontSize(e){return this.editorState.fontSize=e,this.monacoEditor.updateOptions({fontSize:e})}addRemoteCursor(e,o,n){this.editorState.element.style.setProperty("--name",e),this.decorations=this.monacoEditor.deltaDecorations(this.decorations,[{range:new monaco.Range(o,n,o,n+1),options:{isWholeLine:!1,inlineClassName:"cursorDecoration",hoverMessage:{value:"This is the content of the bubble",isTrusted:!0},stickiness:monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}])}}i.Editor=d,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
