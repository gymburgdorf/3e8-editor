(function(i,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(i=typeof globalThis<"u"?globalThis:i||self,t(i["3e8-editor"]={}))})(this,function(i){"use strict";var S=Object.defineProperty;var y=(i,t,o)=>t in i?S(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o;var s=(i,t,o)=>(y(i,typeof t!="symbol"?t+"":t,o),o);function t(d){return new Promise((e,n)=>{const r=document.createElement("script");r.src=d,r.onload=e,r.onerror=n,document.head.appendChild(r)})}const o="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs";document.head.insertAdjacentHTML("beforeend",`
    <link rel="stylesheet"
    data-name="vs/editor/editor.main"
    href="${o}/editor/editor.main.min.css">
`);async function l(){await t(`${o}/loader.min.js`);const d=window.require;return d.config({paths:{vs:o}}),new Promise(e=>{d(["vs/editor/editor.main"],()=>{e(monaco.editor)})})}let h=l();class a{constructor(e,n){s(this,"editorState");s(this,"pythonCodeCheckWorker");s(this,"pythonCodeCheckWorkerBusy");s(this,"parserTimeout");s(this,"monacoEditor");this.editorState=Object.assign({element:null,mode:"python",theme:"dark",fontSize:24,code:"",readOnly:!1,disableSelect:!1,showLineNumbers:!["html","css","svg"].includes(e.mode||""),minLines:4,showInvisibles:e.mode==="python",maxLines:20,showGutter:!0},e);const{code:r,element:c=document.documentElement.appendChild(document.createElement("div")),minLines:w,maxLines:v,theme:b,mode:m,showGutter:u,showLineNumbers:g,readOnly:p,fontSize:f,showInvisibles:z}=this.editorState;this.monacoEditor=n.create(c,{value:r||"//missing code :-)",language:m,theme:"vs-dark",readOnly:p,fontSize:f,...(!u||!g)&&{lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0},scrollbar:{useShadows:!0,verticalHasArrows:!0,horizontalHasArrows:!0,verticalScrollbarSize:8,horizontalScrollbarSize:8,arrowSize:12},renderLineHighlight:"none",scrollBeyondLastLine:!1,wrappingStrategy:"advanced",minimap:{enabled:!1},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,lineNumbersMinChars:3}),this.monacoEditor.onDidContentSizeChange(()=>this.updateHeight),this.updateHeight()}static async create(e){let n=await h;return new a(e,n)}updateHeight(){const e=Math.min(500,this.monacoEditor.getContentHeight());this.editorState.element.style.height=`${e}px`,this.monacoEditor.layout({width:this.editorState.element.getBoundingClientRect().width,height:e})}resize(){return this.updateHeight()}setValue(e){var n;return(n=this.monacoEditor.getModel())==null?void 0:n.setValue(e)}getValue(){var e;return(e=this.monacoEditor.getModel())==null?void 0:e.getValue()}undo(){return this.monacoEditor.trigger("myedits","redo","myedits")}redo(){return this.monacoEditor.trigger("myedits","undo","myedits")}sizeup(){this.setFontSize(this.editorState.fontSize+1)}sizedown(){this.setFontSize(this.editorState.fontSize-1)}setFontSize(e){return this.editorState.fontSize=e,this.monacoEditor.updateOptions({fontSize:e})}}i.Editor=a,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
