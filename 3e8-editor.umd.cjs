(function(o,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(o=typeof globalThis<"u"?globalThis:o||self,t(o["3e8-editor"]={}))})(this,function(o){"use strict";var y=Object.defineProperty;var z=(o,t,s)=>t in o?y(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s;var d=(o,t,s)=>(z(o,typeof t!="symbol"?t+"":t,s),s);function t(r){return new Promise((e,i)=>{const n=document.createElement("script");n.src=r,n.onload=e,n.onerror=i,document.head.appendChild(n)})}const s="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs";document.head.insertAdjacentHTML("beforeend",`
    <link rel="stylesheet"
    data-name="vs/editor/editor.main"
    href="${s}/editor/editor.main.min.css">
`);async function m(){await t(`${s}/loader.min.js`);const r=window.require;return r.config({paths:{vs:s}}),new Promise(e=>{r(["vs/editor/editor.main"],()=>{e(monaco.editor)})})}let g=m();console.log("3e8-edi github v1.1.0");class c{constructor(e,i){d(this,"editorState");d(this,"monacoEditor");d(this,"decorations");d(this,"cursors");var u;this.editorState=Object.assign({element:null,mode:"javascript",theme:"dark",fontSize:24,code:((u=e.element)==null?void 0:u.textContent)||"",readOnly:!1,disableSelect:!1,showLineNumbers:!["css","svg"].includes(e.mode||""),minLines:4,showInvisibles:e.mode==="python",maxLines:20,showGutter:!0},e);const{element:n=document.documentElement.appendChild(document.createElement("div")),code:a,minLines:h,maxLines:E,theme:C,mode:p,showGutter:f,showLineNumbers:S,readOnly:w,fontSize:b,showInvisibles:v}=this.editorState;this.editorState.element.innerHTML="",this.monacoEditor=i.create(n,{value:a||"//missing code :-)",language:p,theme:"vs-dark",readOnly:w,fontSize:b,tabSize:2,insertSpaces:!1,renderWhitespace:v?"boundary":"none",...(!f||!S)&&{lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0},scrollbar:{useShadows:!0,verticalHasArrows:!0,horizontalHasArrows:!0,verticalScrollbarSize:8,horizontalScrollbarSize:8,arrowSize:12},renderLineHighlight:"none",scrollBeyondLastLine:!1,wrappingStrategy:"advanced",minimap:{enabled:!1},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,lineNumbersMinChars:3}),this.decorations=[],this.cursors=[],this.monacoEditor.onDidContentSizeChange(()=>this.updateHeight()),this.updateHeight(),window.addEventListener("resize",()=>this.resize())}static async create(e){let i=await g;return new c(e,i)}updateHeight(){const e=Math.min(500,this.monacoEditor.getContentHeight());this.editorState.element.style.height=`${e}px`,this.monacoEditor.layout({width:this.editorState.element.getBoundingClientRect().width,height:e})}resize(){return this.updateHeight()}setValue(e){var i;return(i=this.monacoEditor.getModel())==null?void 0:i.setValue(e)}getValue(){var e;return(e=this.monacoEditor.getModel())==null?void 0:e.getValue()}undo(){return this.monacoEditor.trigger("myedits","redo","myedits")}redo(){return this.monacoEditor.trigger("myedits","undo","myedits")}sizeup(){this.setFontSize(this.editorState.fontSize+1)}sizedown(){this.setFontSize(this.editorState.fontSize-1)}setFontSize(e){return this.editorState.fontSize=e,this.monacoEditor.updateOptions({fontSize:e})}updateDecorations(){this.decorations=this.monacoEditor.deltaDecorations(this.decorations,this.renderCursors())}renderCursors(){return this.cursors.map(e=>({range:new monaco.Range(e.l,e.c,e.l,e.c+1),options:{isWholeLine:!1,inlineClassName:`cursorDecoration cursor-${l(e.id)}`,hoverMessage:{value:"This is the content of the bubble",isTrusted:!0},stickiness:monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}))}addRemoteCursor(e,i,n){const a=this.cursors.find(h=>h.id===e);a?(a.l=i,a.c=n):(this.cursors.push({id:e,l:i,c:n}),document.head.insertAdjacentHTML("beforeend",`
				<style>.cursor-${l(e)}:before {content: "${e}";}</style>
			`)),this.updateDecorations()}removeRemoteCursor(e){this.cursors=this.cursors.filter(i=>i.id!==e),this.updateDecorations()}}function l(r){return[...r].map(e=>e.charCodeAt(0).toString(16).padStart(2,"0")).join("")}o.Editor=c,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
